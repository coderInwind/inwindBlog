---
  title: 浏览器的渲染原理
  date: 2023-12-23T12:42:45Z
  summary:
  tags: ["浏览器"]
---
  
  ![浏览器的渲染原理](http://82.157.237.225:4000/images/浏览器的渲染原理.jpg)
## 浏览器的渲染原理 
当我在浏览器地址栏输入www.baidu.com时，浏览器会如何运作呢？经过DNS服务器的解析网站域名被转化成ip地址，浏览器将该ip地址上的资源下载下来，通过HTML-Parser将HTML解析为DOM树。通过CSS-Parser将css解析为Style树，将两个合并成为Render树。Render树会结合当前浏览器layout的状态将Render树渲染到页面上，这是浏览器内核完成的操作。

![v8解析图](http://82.157.237.225:4000/images/v8解析图.jpg )

以chrome浏览器为例，javascript代码会被浏览器的v8引擎解析，成一个抽象树，抽象树会被优化转变为机器码，机器码根据不同的系统环境转化为相应的字节码，然后被cpu解析。
## 代码的执行过程  
在javascript被v8引擎解析后，会有一个预编译的过程，会创建全局执行上下文（global exection context）并在函数的调用栈中执行，全局声明的函数和变量会被放入GO（global Object）中，此时他们的值为undefined，这就是为什么当我们在声明变量之前直接打印对象，结果是undefined，在执行到赋值代码时，他们才有了值，我们常常把这个叫做变量提升。GO对象指向的就是window对象。
而全局声明的函数在全局执行上下文中也被放入GO对象，他们的值是一个内存地址，这个地址保存着该函数的函数体和父级作用域，当这个函数会被调用时，会在函数的调用栈中创建一个函数的执行上下文，并会创建出一个AO（activation）对象,保存函数中的变量和函数接收的参数，声明的变量会放入AO对象，他们的值为undefined，在执行到赋值代码时他们才会被赋上值，待函数执行完毕后，函数的执行上下文会被弹出调用栈，AO对象就会被销毁 
## 作用域和作用域链
全局作用域，即最外层的作用域，在代码里声明的函数有自己的局部作用域，在预编译时，对应作用域声明的对象会被放入相应的AO/GO对象中，并赋上undefined，作用域链指的是函数使用变量时会在自己的作用域查找，如果没有找到，就会在他的父级作用域中查找。
## js的内存管理 
javascript的内存分为栈解构和堆结构，基本数据类型内存分配在栈解构中，复杂数据类型分配在堆结构中。
javascript有自己的垃圾回收机制，广泛采用的算法是标记清除算法（从根一直往下找，对没有引用的对象，就会进行清除）
  